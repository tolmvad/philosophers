[![eng](img/eng.png)](README.md) ![ru](img/ru.png)
# `Philosophers`

Проект в Ecole42. Цель данного проекта научиться работать с `threads`, `mutex`, `semaphores`.

### Описание
Это класическая [задача об обедающих философах](https://ru.wikipedia.org/wiki/%D0%97%D0%B0%D0%B4%D0%B0%D1%87%D0%B0_%D0%BE%D0%B1_%D0%BE%D0%B1%D0%B5%D0%B4%D0%B0%D1%8E%D1%89%D0%B8%D1%85_%D1%84%D0%B8%D0%BB%D0%BE%D1%81%D0%BE%D1%84%D0%B0%D1%85).
Для выполнения данного задания, нужно знать некоторые правила:
- Один или несколько философов сидят за круглым столом.
- Философы попеременно едят, думают или спят.
Пока они едят, они не думают и не спят;
пока они думают, они не едят и не спят;
и, конечно же, во время сна они не едят и не думают.
- На столе также лежат вилки. Вилок столько же, сколько философов.
- Поскольку есть одной вилкой очень неудобно, философ берет 2 вилки, по одной в каждую руку.
- Когда философ заканчивает есть, он кладет вилки обратно на стол и начинает спать. Проснувшись, они снова начинают думать. Симуляция останавливается, когда философ умирает от голода.
- Каждый философ должен есть и никогда не должен голодать.
- Философы не разговаривают друг с другом.
- Философы не знают, что другой философ скоро умрет.
- Нет необходимости говорить, что философы должны избегать смерти.

Программа принимает на вход 4 или 5 агрументов и выглядит:
```bash
./philo number_of_philosophers time_to_die time_to_eat time_to_sleep number_of_times_each_philosopher_must_eat
```
- __number_of_philosophers__: Количество философов и вилок.
- __time_to_die__ (в милисекундах): Если философ не начал есть за время time_to_die с начала последнего приема пищи или начала симуляции, он умирает.
- __time_to_eat__ (в милисекундах): Время, необходимое философу, чтобы поесть. В течение этого времени он держит 2 вилки.
- __time_to_sleep__ (в милисекундах): Время, которое философ спит.
- __number_of_times_each_philosopher_must_eat__ (опцианальный аргумент): Если все философы поели не менее number_of_times_each_philosopher_must_eat раз, симуляция останавливается. Если не указано, симуляция останавливается, когда один из философов умрёт.

Во время исполнения программы, любое изменение состояния философа должно выглядеть сделующим образом:
```bash
timestamp_in_ms X has taken a fork
timestamp_in_ms X is eating
timestamp_in_ms X is sleeping
timestamp_in_ms X is thinking
timestamp_in_ms X died
```
__timestamp_in_ms__ и __X__ заменяются на:
- __timestamp_in_ms__ - текущая метка времени в миллисекундах.
- __X__ - номер философа (от 1 до number_of_philosopher).

#### Специфические правила
__Основная часть__:
- Каждый философ является потоком.
- Между каждой парой философов есть одна вилка. Поэтому, если философов несколько, каждый философ имеет вилку с левой стороны и вилку с правой стороны. Если есть только один философ, то на столе должна быть только одна вилка.
- Чтобы предотвратить дублирование вилок философами, необходимо защитить состояние вилок с помощью мьютекса для каждой из них.

__Бонусная часть__:
- Все вилки лежат в центре стола.
- У них нет состояний в памяти, но количество доступных вилок представлено семафором.
- Каждый философ должен быть процессом. Но главный процесс не должен быть философом.

### Оценка от moulinette

![125/100](img/125.png)
